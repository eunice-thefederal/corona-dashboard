<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,300i,400,400i,500,500i,700,700i,900,900i&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- <div class="tfcontainer">
        <div class="worldmap"></div>
    </div> -->
    <div class="covidDash-wrapper">
		<section class="dashboard-header">
			<figure>
				<img src="img/Asset2.png" alt="Covid" />
			</figure>
			<div class="dashboard-title">
				<figure>
					<img src="img/Asset1.png" alt="The Federal" />
				</figure>
				<figcaption>Corona Virus <br/>dashboard</figcaption>
			</div>
		</section>
		<section class="total-affected">
			<h1 id="totAffected"></h1>
			<p>TOTAL AFFECTED PERSONS</p>
		</section>
		<section class="deaths-recoverData">
			<div class="deathdata">
				<figure>
					<img src="img/Asset4.png" alt="total death">
				</figure>
				<div class="deathCount">
					<h2>Total Deaths</h2>
					<h1 id="totDeath"></h1>
				</div>
			</div>
			<div class="recoverdata">
				<figure>
					<img src="img/Asset3.png" alt="total death">
				</figure>
				<div class="recoverCount">
					<h2>Total Recovered</h2>
					<h1 id="totRecovered"></h1>
				</div>
			</div>
		</section>
		<section class="barchart">
			<div class="left-chart">
				 <div class="horstackchart">
                     <div class="bar100">
                         <div id="barmild"></div>
                         <div id="barcritical"></div>
                     </div>
                 </div>
				 <div class="totalData">
				 	<div class="currentlyInfected">
				 		<h2>Currently infected</h2>
				 		<h1 id="currInfected">47,524</h1>
				 	</div>
				 	<div class="mildCondition">
				 		<h2>Mild condition</h2>
				 		<h1 id="currMild">41,736</h1>
				 	</div>
				 	<div class="criticalCondition">
				 		<h2>Critical condition</h2>
				 		<h1 id="currCritical">5,788</h1>
				 	</div>
				 </div>
			</div>
			<div class="right-chart">
				<h1>Cases with <br />outcome</h1>
				<p id="outcome-cases">68,722</p>
				<img src="img/Asset10.png">
			</div>
		</section>
		<section class="world-impact">
			<h1>COVID-19 world impact</h1>
			<p>Click on a country</p>
			<div class="worldmap"></div>
			<div class="countrywiseData">
				<div class="country">
					<h2>Country,  Other</h2>
					<h1 id="countryname">China</h1>
				</div>
				<div class="totCases">
					<h2>Total Cases</h2>
					<h1 id="countrytotalcases">80,757</h1>
				</div>
				<div class="newCases">
					<h2>New Cases</h2>
					<h1 id="countrynewcases">22</h1>
				</div>
			</div>
		</section>
		<section class="dangerData">
			<div class="totalandNew">
				<figure>
					<img src="img/Asset6.png">
				</figure>
				<div class="deathCounts">
					<div class="topCounts">
						<figure>
							<img src="img/Asset4.png">
						</figure>
						<div class="countValue">
							<h2>Total Deaths</h2>
							<h1 id="countrytotaldeaths">3,136</h1>
						</div>
					</div>
					<div class="downCounts">
						<figure>
							<img src="img/Asset11.png">
						</figure>
						<div class="countValue">
							<h2>New Deaths</h2>
							<h1 id="countrynewdeaths">+17</h1>
						</div>
					</div>
				</div>
			</div>
			<div class="criticalData">
				<div class="recoverCounts">
					<h2>Total Recovered</h2>
					<h1 id="countrytotalRecovered">60,104</h1>
				</div>
				<div class="criticalCounts">
					<h2>Serious/critical</h2>
					<h1 id="countrySerious">4,794</h1>
				</div>
			</div>
		</section>
		<section class="dailyDeaths">
			<h1>Daily Deaths</h1>
			<p>of Novel Coronavirus (2019-nCoV)</p>
			<img src="img/Asset12.png" />
		</section>
		<section class="totalDeaths">
			<h1>Total Deaths</h1>
			<p>of Novel Coronavirus (2019-nCoV)</p>
			<img src="img/Asset12.png" />
		</section>
	</div>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://thefederal.com/embed/common-js/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script src="https://thefederal.com/embed/common-js/underscore-min.js"></script>
    <script src="js/testdata.js"></script>
    <script src="js/map.js"></script>
    <script type='text/javascript'>

        var currentData = {
            infect: 48393,
            mild: 42646,
            "mild%": 88,
            serious: 5747,
            "serious%": 12,
            outcomeTotal: 70882,
            "outcomeRecovered": 66582,
            "outcomeRecovered%": 94,
            "outcomeDeaths": 4300,
            "outcomeDeaths%": 6
        }
 
        var filterData = countrywisedata.filter(function(item){
            return item['Total Cases'] !== null ;
        })

        var globalTotalData = countrywisedata.filter(function(item){
            return item['Country'] === "Total" ;
        })

        var formatComma = d3.format(",")

        d3.select("#totAffected").text(formatComma(globalTotalData[0]["Total Cases"]))
        d3.select("#totDeath").text(formatComma(globalTotalData[0]["Total Deaths"]))
        d3.select("#totRecovered").text(formatComma(globalTotalData[0]["Total Recovered"]))
       
        d3.select("#currInfected").text(formatComma(currentData["infect"]))
        d3.select("#currMild").text(formatComma(currentData["mild"]))
        d3.select("#currCritical").text(formatComma(currentData["serious"]))
        d3.select("#outcome-cases").text(formatComma(currentData["outcomeTotal"]))
        
        
        
        // Mild and Critical Chart
       
        d3.select("#barcritical")
            .style("width", currentData["serious%"]+"%")
            .text(currentData["serious%"]+"%")

        d3.select("#barmild").text(currentData["mild%"]+"%")


        drawWorldMap(".worldmap");
    </script>

</body>
</html>